trigger:
  - master
  - feature/*

variables:
  # Define a variable for your Docker image name
  testImageName: 'my-api-tests'
  tag: 'my-api-tests'

steps:
- task: Docker@2
  displayName: 'Build Docker Image with API tests'
  inputs:
    command: 'build'
    dockerfile: 'Dockerfile' # Path to your Dockerfile for the tests
    tags: 'my-api-tests'

- script: |
    echo "Running Dockerized Tests..."
    sudo docker run --rm 'my-api-tests'
    displayName: 'Run Dockerized Tests'