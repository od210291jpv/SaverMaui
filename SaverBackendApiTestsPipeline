trigger:
  - master
  - feature/*

variables:
  # Define a variable for your Docker image name
  testImageName: 'my-api-tests'
  tag: '$(Build.BuildId)'

steps:
- task: Docker@2
  displayName: 'Build Docker Image with API tests'
  inputs:
    command: 'build'
    dockerfile: 'Dockerfile' # Path to your Dockerfile for the tests
    tags: '$(testImageName):$(tag)'
    buildContext: 'SaverMaui'

- script: |
    echo "Running Dockerized Tests..."
    docker run --rm $(testImageName):$(tag)
    displayName: 'Run Dockerized Tests'